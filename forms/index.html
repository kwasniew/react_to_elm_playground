<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <!-- Disable browser cache -->
    <meta http-equiv="cache-control" content="max-age=0" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
    <meta http-equiv="pragma" content="no-cache" />
    <title>Project Three: Forms</title>
  </head>

  <body>
    <script src="./elm.js"></script>
    <script>
     var app = Elm.Main.fullscreen();
     var count = 1;
     app.ports.savePeople.subscribe(function(people) {
       const success = !!(count++ % 2);

       setTimeout(() => {
         if (success) {
            localStorage.setItem("people", JSON.stringify(people));
            app.ports.savePeopleSuccess.send(people);
         } else {
            app.ports.savePeopleFailure.send("error");
         }

       }, 1000);
     });
   </script>
  </body>

</html>
